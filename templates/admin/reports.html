{% extends "admin/admin_base.html" %}
{% block title %}BÃ¡o cÃ¡o & Thá»‘ng kÃª{% endblock %}

{% block content %}

<div class="page-header">
    <h1 class="page-title">ðŸ“Š BÃ¡o cÃ¡o & Thá»‘ng kÃª</h1>
</div>

<!-- SUMMARY CARDS -->
<div class="stats-grid mb-4">
    <div class="stat-card">
        <div class="stat-icon bg-primary">ðŸŽŸ</div>
        <div>
            <p>Tá»•ng vÃ© bÃ¡n</p>
            <h3>{{ total_tickets }}</h3>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon bg-success">ðŸ’°</div>
        <div>
            <p>Doanh thu</p>
            <h3>{{ "{:,.0f}".format(total_revenue) }} Ä‘</h3>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon bg-warning">ðŸŽ¬</div>
        <div>
            <p>Phim bÃ¡n cháº¡y</p>
            <h3>{{ best_movie }}</h3>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon bg-danger">ðŸ‘¥</div>
        <div>
            <p>KhÃ¡ch hÃ ng</p>
            <h3>{{ total_customers }}</h3>
        </div>
    </div>
</div>

<!-- REPORT TABLE -->
<div class="card-admin">
    <h5 class="mb-3">ðŸ“‹ Doanh thu theo phim</h5>

    <table class="table table-hover align-middle admin-table">
        <thead>
            <tr>
                <th>#</th>
                <th>TÃªn phim</th>
                <th>Sá»‘ vÃ© bÃ¡n</th>
                <th>Doanh thu</th>
            </tr>
        </thead>
        <tbody>
            {% for r in report_by_movie %}
            <tr>
                <td>{{ loop.index }}</td>
                <td><strong>{{ r.movie_title }}</strong></td>
                <td>{{ r.total_tickets }}</td>
                <td>{{ "{:,.0f}".format(r.revenue) }} Ä‘</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
